var WPGlobusCore;!function(t){var e;e=WPGlobusCore={strpos:function(t,e,a){t=""+t;var n=t.indexOf(e,a);return n>=0?n:!1},TextFilter:function(t,a,n){if("undefined"==typeof t||""===t)return t;var o,i,l=[],s=!1;a=""==a?"en":a,n="undefined"==typeof n||""==n?"RETURN_IN_DEFAULT_LANGUAGE":n,l[0]=[],l[0].start=WPGlobusCoreData.locale_tag_start.replace("%s",a),l[0].end=WPGlobusCoreData.locale_tag_end,l[1]=[],l[1].start="<!--:"+a+"-->",l[1].end="<!--:-->",l[2]=[],l[2].start="[:"+a+"]",l[2].end="[:";for(var d=0;3>d;d++)if(o=e.strpos(t,l[d].start),o!==!1){o+=l[d].start.length,i=e.strpos(t,l[d].end,o),t=i===!1?t.substr(o):t.substr(o,i-o),s=!0;break}return s||("RETURN_EMPTY"==n?(a!=WPGlobusCoreData.default_language||/(\{:|\[:|<!--:)[a-z]{2}/.test(t))&&(t=""):a==WPGlobusCoreData.default_language?/(\{:|\[:|<!--:)[a-z]{2}/.test(t)&&(t=""):t=e.TextFilter(t,WPGlobusCoreData.default_language)),t},addLocaleMarks:function(t,e){return WPGlobusCoreData.locale_tag_start.replace("%s",e)+t+WPGlobusCoreData.locale_tag_end},getTranslations:function(a){var n,o={};return t.each(WPGlobusCoreData.enabled_languages,function(t,i){n=i==WPGlobusCoreData.default_language?"RETURN_IN_DEFAULT_LANGUAGE":"RETURN_EMPTY",o[i]=e.TextFilter(a,i,n)}),o},getString:function(a,n,o){if("undefined"==typeof a)return a;"undefined"==typeof n&&(n=""),"undefined"==typeof o&&(o=WPGlobusCoreData.language),a=e.getTranslations(a),a[o]=n;var i="";return t.each(a,function(t,a){""!=a&&t!=WPGlobusCoreData.default_language&&(i+=e.addLocaleMarks(a,t))}),""!=a[WPGlobusCoreData.default_language]&&(i=""==i?a[WPGlobusCoreData.default_language]:e.addLocaleMarks(a[WPGlobusCoreData.default_language],WPGlobusCoreData.default_language)+i),i}}}(jQuery);var WPGlobusDialogApp;!function(t){var e;e=WPGlobusDialogApp={option:{listenClass:".wpglobus_dialog_start",settingsClass:".wpglobus_dialog_settings",dialogTabs:"#wpglobus-dialog-tabs",dialogTitle:"",customData:null,callback:function(){}},form:void 0,element:void 0,element_by:"id",id:"",clone_id:"",wpglobus_id:"",type:"textarea",source:"",order:{},value:{},request:"core",attrs:{},dialogTitle:"",startButton:['<span id="wpglobus-dialog-start-{{clone_id}}" ','style="{{style}}" ','data-type="control" data-dialog-title="{{title}}" ','data-source-type="" data-source-id="{{id}}" data-source-name="{{name}}" ','data-nodename="{{nodename}}"',"{{sbTitle}} ",'class="{{classes}}"></span>'].join(""),startButtonClass:"wpglobus_dialog_start wpglobus_dialog_icon",clicks:0,init:function(a){e.option=t.extend(e.option,a),t(e.option.dialogTabs).tabs(),e.dialogTitle=e.option.dialogTitle,this.attachListener(),null!=e.option.customData&&"undefined"!=typeof e.option.customData.addElements&&t.each(e.option.customData.addElements,function(t,a){e.addElement(a)})},convertToId:function(t){return t=t.replace(/\]/g,""),t=t.replace(/\[/g,"-")},addElement:function(a){var n={id:null,dialogTitle:"",style:"",styleTextareaWrapper:"",sbTitle:""};if("string"==typeof a)n.id=a;else{if("object"!=typeof a)return;n=t.extend(n,a)}var o,i,l,s=null,d=null,u=null,r=null,c=e.startButton,g="";if(e.element_by="id",r=document.getElementById(n.id),null===r?(e.element_by="name",r=document.getElementsByName(n.id)):(g=r.nodeName,g=g.toLowerCase()),0!=r.length&&(d=n.id,"id"==e.element_by?s=t("#"+d):(g=r[0].nodeName,g=g.toLowerCase(),s=t(g+'[name="'+d+'"]')),u="undefined"===s.attr("name")?d:s.attr("name"),e.clone_id=e.convertToId(d),!(t("#wpglobus-"+e.clone_id).length>0||t(g+'[name="wpglobus-'+u+'"]').length>0))){o=t(s.clone()),l=s.attr("style")||"",s.attr("style","display:none;"),o.attr("id","wpglobus-"+e.clone_id).attr("name","wpglobus-"+u),"id"==e.element_by?o.attr("data-source-id",d).attr("data-source-name","").attr("data-source-get-by",e.element_by):o.attr("data-source-id","").attr("data-source-name",u).attr("data-source-get-by",e.element_by),"textarea"==g?(i=WPGlobusCore.getTranslations(s.text())[WPGlobusCoreData.language],o.text(i),o.attr("data-nodename","textarea"),""==n.style?o.attr("style",l+";width:95%;float:left;"):o.attr("style",l+";"+n.style)):(i=WPGlobusCore.getTranslations(s.val())[WPGlobusCoreData.language],o.attr("value",i),o.attr("data-nodename","input"),""!=n.style&&o.attr("style",l+";"+n.style)),c=c.replace(/{{clone_id}}/g,e.clone_id),"id"==e.element_by?(c=c.replace(/{{id}}/g,e.clone_id),c=c.replace(/{{name}}/g,""),c=c.replace(/{{nodename}}/g,"")):(c=c.replace(/{{id}}/g,""),c=c.replace(/{{name}}/g,u),c=c.replace(/{{nodename}}/g,g)),c="textarea"==g?c.replace("{{style}}","float:left;margin-top:0;"):c.replace("{{style}}","");var p="textarea"==g?e.startButtonClass+" wpglobus-textarea wpglobus-textarea-"+e.clone_id:e.startButtonClass;c=c.replace("{{classes}}",p),c=""==n.dialogTitle?c.replace("{{title}}",e.dialogTitle):c.replace("{{title}}",n.dialogTitle),c=""==n.sbTitle?c.replace("{{sbTitle}}",n.sbTitle):c.replace("{{sbTitle}}",'title="'+n.sbTitle+'"'),t(c).insertAfter(s),t(o).insertAfter(s),"textarea"==g&&(t("#wpglobus-"+e.clone_id).addClass("wpglobus-textarea-"+e.clone_id),t(".wpglobus-textarea-"+e.clone_id).wrapAll('<div class="wpglobus-textarea-wrapper" style="'+n.styleTextareaWrapper+'"></div>')),t(document).on("change","#wpglobus-"+e.clone_id,this.onChangeCloneField)}},onChangeCloneField:function(){var e=t(this),a=e.data("source-id");a=""==a?e.data("nodename")+'[name="'+e.data("source-name")+'"]':"#"+a,t(a).val(WPGlobusCore.getString(t(a).val(),e.val()))},saveDialog:function(){var a,n,o,i="",l="",s="";t(".wpglobus_dialog_textarea").each(function(e,d){a=t(d),n=a.val(),o=a.data("language"),o==WPGlobusAdmin.data.language&&(s=n),""!=n&&(i+=WPGlobusCore.addLocaleMarks(n,o),o==WPGlobusCoreData.default_language&&(l=n))}),i=i.length==l.length+8?l:i,t(e.id).val(i),i=""==s?l:s,t(e.wpglobus_id).val(i)},dialog:t("#wpglobus-dialog-wrapper").dialog({autoOpen:!1,width:650,modal:!0,dialogClass:"wpglobus-dialog",buttons:[{text:"Save","class":"wpglobus-button-save",click:function(){e.saveDialog(),e.dialog.dialog("close")}},{text:"Cancel","class":"wpglobus-button-cancel",click:function(){e.dialog.dialog("close")}}],open:function(){var a=e.dialogTitle;"undefined"!=typeof e.attrs.maxlength&&(t(".wpglobus_dialog_textarea").attr("maxlength",e.attrs.maxlength),a+=" | maxlength="+e.attrs.maxlength),t(".wpglobus-dialog .ui-dialog-title").text(a)},close:function(){e.form[0].reset()}}),attachListener:function(){t(document).on("click",e.option.settingsClass,function(){t(".wpglobus_dialog_options_wrapper").hasClass("hidden")?t(".wpglobus_dialog_options_wrapper").removeClass("hidden"):t(".wpglobus_dialog_options_wrapper").addClass("hidden")}),t(document).on("click",".wpglobus_dialog_option",function(a){var n,o=t(this),i=o.data("object");e.order.action="save_post_meta_settings",e.order.post_type=WPGlobusAdmin.data.post_type,e.order.checked=o.prop("checked"),e.order.id=o.attr("id"),e.order.meta_key=o.data("meta-key"),n=e.ajax(e.order),n.done(function(e){"ok"==e.result&&("true"==e.checked?t(i).removeClass("wpglobus_dialog_start_hidden"):t(i).addClass("wpglobus_dialog_start_hidden"))}).fail(function(t){}).always(function(t,e){})}),t(document).on("click",e.option.listenClass,function(a){e.element=t(this),e.id=e.element.data("source-id"),""==e.id?(e.id=e.element.data("nodename")+'[name="'+e.element.data("source-name")+'"]',e.wpglobus_id="#wpglobus-"+e.convertToId(e.element.data("source-name"))):(e.wpglobus_id="#wpglobus-"+e.id,e.id="#"+e.id),e.clicks++,1==e.clicks&&setTimeout(function(){if(1==e.clicks)e.onClick(a);else{var n=t(e.id);n.hasClass("hidden")?n.removeClass("hidden").attr("style","display:block;"):n.addClass("hidden").attr("style","display:none;")}e.clicks=0},200)}),e.form=e.dialog.find("form#wpglobus-dialog-form").on("submit",function(t){t.preventDefault(),e.saveDialog()})},ajax:function(e){return t.ajax({type:"POST",url:WPGlobusAdmin.ajaxurl,data:{action:WPGlobusAdmin.process_ajax,order:e},dataType:"json",async:!1})},onClick:function(a){"undefined"==typeof e.element.data("dialog-title")||""==e.element.data("dialog-title")?e.dialogTitle=e.option.dialogTitle:e.dialogTitle=e.element.data("dialog-title"),"undefined"!=typeof e.id&&(e.attrs.maxlength=t(e.id).attr("maxlength")),e.source=e.element.data("source-value"),"undefined"==typeof e.source&&(e.source=t(e.id).val(),"ajax"==e.request||(e.value=WPGlobusCore.getTranslations(e.source))),t.each(e.value,function(e,a){t("#wpglobus-dialog-"+e).val(a)}),e.dialog.dialog("open")}}}(jQuery),jQuery(document).ready(function(){"use strict";window.WPGlobusAdminApp=function(t,e){return t.App=function(t){void 0===window.WPGlobusAdminApp&&(this.config={debug:!1,version:WPGlobusAdmin.version},this.status="ok","undefined"===WPGlobusAdmin?(this.status="error",this.config.debug&&console.log("Error options loading")):this.config.debug&&console.dir(WPGlobusAdmin),this.config.disable_first_language=['<div id="disable_first_language" style="display:block;" class="redux-field-errors notice-red">',"<strong>","<span>&nbsp;</span>",WPGlobusAdmin.i18n.cannot_disable_language,"</strong>","</div>"].join(""),e.extend(this.config,t),"ok"===this.status&&this.init())},t.App.prototype={$document:e(document),init:function(){this.admin_init(),e("#content").addClass("wpglobus-editor").attr("data-language",WPGlobusAdmin.data.default_language),e("textarea[id^=content_]").each(function(t,a){var n=e(a).attr("id").replace("content_","");e(a).attr("data-language",n)}),"post-edit"===WPGlobusAdmin.page?(this.post_edit(),this.set_dialog(),"undefined"!=typeof WPGlobusAioseop&&WPGlobusAioseop.init()):"menu-edit"===WPGlobusAdmin.page?this.nav_menus():"taxonomy-edit"===WPGlobusAdmin.page?WPGlobusAdmin.data.tag_id&&this.taxonomy_edit():"taxonomy-quick-edit"===WPGlobusAdmin.page?this.quick_edit("taxonomy"):"edit.php"===WPGlobusAdmin.page?this.quick_edit("post"):"options-general.php"==WPGlobusAdmin.page?this.options_general():"widgets.php"==WPGlobusAdmin.page?(WPGlobusWidgets.init(),WPGlobusDialogApp.init({dialogTitle:"Edit text"})):"wpglobus_options"==WPGlobusAdmin.page?this.start():WPGlobusDialogApp.init({customData:WPGlobusCoreData.page_custom_data})},getCurrentTab:function(){return e(".wpglobus-post-body-tabs-list .ui-tabs-active").data("language")},admin_init:function(){var t=e(".wpglobus-addons-group a").data("key");if("indefined"!=typeof t)if(window.location.search.indexOf("page=wpglobus_options&tab="+t)>=0)window.location="admin.php?page=wpglobus-addons";else{var a=e("#toplevel_page_wpglobus_options li").eq(t+1);e(a).find("a").attr("href","admin.php?page=wpglobus-addons").attr("onclick","window.location=jQuery(this).attr('href');return false;")}},options_general:function(){var t=e("#blogname"),a=e("body");t.addClass("hidden"),e("#wpglobus-blogname").insertAfter(t).removeClass("hidden"),a.on("blur",".wpglobus-blogname",function(){var a="";e(".wpglobus-blogname").each(function(t,n){var o=e(n),i=o.data("language");""!==o.val()&&(a=a+WPGlobusAdmin.data.locale_tag_start.replace("%s",i)+o.val()+WPGlobusAdmin.data.locale_tag_end)}),t.val(a)});var n=e("#blogdescription");n.addClass("hidden"),e("#wpglobus-blogdescription").insertAfter(n).removeClass("hidden"),a.on("blur",".wpglobus-blogdesc",function(){var t="";e(".wpglobus-blogdesc").each(function(a,n){var o=e(n),i=o.data("language");""!==o.val()&&(t=t+WPGlobusAdmin.data.locale_tag_start.replace("%s",i)+o.val()+WPGlobusAdmin.data.locale_tag_end)}),n.val(t)})},quick_edit:function(t){if("undefined"!=typeof WPGlobusAdmin.data.has_items&&WPGlobusAdmin.data.has_items){var a="",n=0;e(document).ajaxComplete(function(t,o,i){"undefined"!=typeof i.data&&""!=a&&i.data.indexOf("action=inline-save-tax&")>=0&&(e("#"+a+" a.row-title").text(WPGlobusAdmin.qedit_titles[n][WPGlobusAdmin.data.language].name),e("#"+a+" .description").text(WPGlobusAdmin.qedit_titles[n][WPGlobusAdmin.data.language].description))});var o={};e("#the-list tr").each(function(a,i){var l=e(i),s="post"===t?"post-":"tag-";n=l.attr("id").replace(s,""),o[n]={},"post"===t?o[n].source=l.find(".post_title").text():"taxonomy"===t&&(o[n].source=e("#inline_"+n+" .name").text())});var i={};i.action="get_titles",i.type=t,i.taxonomy="undefined"==typeof WPGlobusAdmin.data.taxonomy?!1:WPGlobusAdmin.data.taxonomy,i.title=o,e.ajax({type:"POST",url:WPGlobusAdmin.ajaxurl,data:{action:WPGlobusAdmin.process_ajax,order:i},dataType:"json"}).done(function(t){WPGlobusAdmin.qedit_titles=t.qedit_titles,e.each(t.bulkedit_post_titles,function(t,a){e("#inline_"+t+" .post_title").text(a[WPGlobusAdmin.data.language].name)})}).fail(function(t){}).always(function(t,e){}),e("body").on("change",".wpglobus-quick-edit-title",function(){var t="",a=[];e(".wpglobus-quick-edit-title").each(function(o,i){var l=e(i),s=l.data("language");""!==l.val()&&(t=WPGlobusCore.getString(t,l.val(),s)),WPGlobusAdmin.qedit_titles[n][s].name=l.val(),a[o]=s});var o=e(document).triggerHandler("wpglobus_get_translations",{string:t,lang:a,id:n});"undefined"!=typeof o&&(t=o),e("input.ptitle").eq(0).attr("value",t),WPGlobusAdmin.qedit_titles[n].source=t}),"undefined"!=typeof WPGlobusAdmin.data.tags&&e.each(WPGlobusAdmin.data.tags,function(t,e){WPGlobusAdmin.data.value[e].post_id={}}),e("a.save, input#bulk_edit").on("mouseenter",function(t){"undefined"!=typeof WPGlobusAdmin.data.tags&&("bulk_edit"==t.currentTarget.id?e("input#bulk_edit").unbind("click"):e("a.save").unbind("click"),e("a.save, input#bulk_edit").click(function(t){"bulk_edit"!=t.currentTarget.id&&e.ajaxSetup({async:!1});var a,n,o,i=e(this).parents("tr"),l=i.attr("id").replace("edit-","");e.each(WPGlobusAdmin.data.tags,function(t,e){if(a=i.find("textarea[name='"+WPGlobusAdmin.data.names[e]+"']"),0==a.size())return!0;WPGlobusAdmin.data.value[e].post_id[l]=a.val(),n=WPGlobusAdmin.data.value[e].post_id[l].split(","),o=[];for(var s=0;s<n.length;s++)n[s]=n[s].trim(" "),""!=n[s]&&("undefined"==typeof WPGlobusAdmin.data.tag[e][n[s]]?o[s]=n[s]:o[s]=WPGlobusAdmin.data.tag[e][n[s]]);a.val(o.join(", "))}),"bulk_edit"!=t.currentTarget.id&&(inlineEditPost.save(l),e.ajaxSetup({async:!0}))}))}),e("#the-list").on("click","a.editinline",function(){var o=e(this);if(a=o.parents("tr").attr("id"),"post"===t)n=a.replace("post-","");else{if("taxonomy"!==t)return;n=a.replace("tag-","")}"post"===t&&"undefined"!=typeof WPGlobusAdmin.data.tags&&e.each(WPGlobusAdmin.data.tags,function(t,a){""!=WPGlobusAdmin.data.value[a]&&"undefined"!=typeof WPGlobusAdmin.data.value[a].post_id[n]&&e("#edit-"+n+' textarea[name="'+WPGlobusAdmin.data.names[a]+'"]').val(WPGlobusAdmin.data.value[a].post_id[n])});var i=e("#edit-"+n+" input.ptitle").eq(0),l=i.parents("label");i.val(WPGlobusAdmin.qedit_titles[n].source),i.addClass("hidden"),e(WPGlobusAdmin.data.template).insertAfter(l),"undefined"==typeof WPGlobusAdmin.qedit_titles[n]&&(WPGlobusAdmin.qedit_titles[n]={},WPGlobusAdmin.qedit_titles[n].source=e("#"+a+" .name a.row-title").text(),e(WPGlobusAdmin.data.enabled_languages).each(function(t,e){WPGlobusAdmin.qedit_titles[n][e]={},e==WPGlobusAdmin.data.default_language?WPGlobusAdmin.qedit_titles[n][e].name=WPGlobusAdmin.qedit_titles[n].source:WPGlobusAdmin.qedit_titles[n][e].name="",WPGlobusAdmin.qedit_titles[n][e].description=""})),e(".wpglobus-quick-edit-title").each(function(t,a){var o=e(a),i=o.data("language");o.attr("id",i+n),"undefined"!=typeof WPGlobusAdmin.qedit_titles[n][i]&&(WPGlobusAdmin.qedit_titles[n][i].name=WPGlobusAdmin.qedit_titles[n][i].name.replace(/\\\'/g,"'"),WPGlobusAdmin.qedit_titles[n][i].name=WPGlobusAdmin.qedit_titles[n][i].name.replace(/\\\"/g,'"'),o.attr("value",WPGlobusAdmin.qedit_titles[n][i].name),WPGlobusAdmin.qedit_titles[n].source=WPGlobusCore.getString(WPGlobusAdmin.qedit_titles[n].source,WPGlobusAdmin.qedit_titles[n][i].name,i))}),e("input.ptitle").eq(0).attr("value",WPGlobusAdmin.qedit_titles[n].source)})}},taxonomy_edit:function(){var t=[];t[0]="name",t[1]="description";var a=function(t,a){var n,o=e("#"+t),i=o.clone(),l=o.attr("name"),s="wpglobus-element wpglobus-element_"+t+" wpglobus-element_"+a+" wpglobus-translatable";n=document.getElementById(t),n=n.nodeName,e(i).attr("id",t+"_"+a),e(i).attr("name",l+"_"+a),a!==WPGlobusCoreData.default_language&&(s+=" hidden"),e(i).attr("class",s),e(i).attr("data-save-to",t),e(i).attr("data-language",a),"INPUT"==n?e(i).attr("value",e("#wpglobus-link-tab-"+a).data(t)):"TEXTAREA"==n&&e(i).text(e("#wpglobus-link-tab-"+a).data(t)),o.addClass("hidden"),0==e(".wpglobus-element_"+t).size()?e(i).insertAfter(o):e(i).insertAfter(e(".wpglobus-element_"+t).last())};e.each(WPGlobusCoreData.enabled_languages,function(n,o){e.each(t,function(t,e){a(e,o)})}),e(".wpglobus-taxonomy-tabs").insertAfter("#ajax-response"),e(".wrap").tabs(),e("body").on("click",".wpglobus-taxonomy-tabs li",function(t){var a=e(this),n=a.data("language");e(".wpglobus-element").addClass("hidden"),e(".wpglobus-element_"+n).removeClass("hidden")}),e(".wpglobus-element").on("change",function(){var t=e(this),a=t.data("save-to"),n="";e(".wpglobus-element").each(function(t,o){var i=e(o),l=i.val();i.data("save-to")==a&&""!==l&&(n+=WPGlobusCore.addLocaleMarks(l,i.data("language")))}),e("#"+a).val(n)})},nav_menus:function(){var t,a,n="#menu-to-edit .menu-item",o=function(){a!==e(n).size()&&(clearInterval(t),e(n).each(function(t,a){var n=e(a);if(!n.hasClass("wpglobus-menu-item")){var o=e(a).attr("id");e.each(["input.edit-menu-item-title","input.edit-menu-item-attr-title"],function(t,a){var n=e("#"+o+" "+a),i=e(n);if(!i.hasClass("wpglobus-hidden")){i.addClass("wpglobus-hidden"),i.css("display","none");var l=i.parent("label"),s=i.parents("p");e(s).css("height","80px"),e(l).append('<div style="color:#f00;">'+WPGlobusAdmin.i18n.save_nav_menu+"</div>")}}),n.addClass("wpglobus-menu-item")}}))};e.ajaxSetup({beforeSend:function(i,l){"undefined"!=typeof l.data&&l.data.indexOf("action=add-menu-item")>=0&&(a=e(n).size(),t=setInterval(o,500))}}),e(n).each(function(t,a){var n=e(a).attr("id"),o=n.replace("menu-item-","");e.each(["input.edit-menu-item-title","input.edit-menu-item-attr-title"],function(t,a){var i=e("#"+n+" "+a),l=e("#"+n+" "+a).parents("p"),s=0;e.each(WPGlobusAdmin.data.open_languages,function(n,d){var u=e(i[0].outerHTML);u.attr("id",e(i).attr("id")+"-"+d),u.attr("name",e(i).attr("id")+"-"+d),u.attr("data-language",d),u.attr("data-item-id",o),u.attr("placeholder",WPGlobusAdmin.data.en_language_name[d]);var r=WPGlobusAdmin.data.items[o][d][a]["class"];0===t&&d===WPGlobusAdmin.data.default_language?u.attr("class",r+" edit-menu-item-title"):u.attr("class",r),u.attr("value",WPGlobusAdmin.data.items[o][d][a].caption),u.css("margin-bottom","0.6em"),e(l).append(u[0].outerHTML),s=n}),s=40*(s+1),e(i).css("display","none").attr("class","").addClass("widefat wpglobus-hidden"),e(l).css("height",s+"px").addClass("wpglobus-menu-item-box")}),e(a).addClass("wpglobus-menu-item")}),e(".menus-move-left, .menus-move-right").each(function(t,a){var n,o=e(a),i=(o.parents("li").attr("id").replace("menu-item-",""),o.attr("title"));"undefined"!=typeof i&&e.each(WPGlobusAdmin.data.post_titles,function(t,e){i.indexOf(t)>=0&&(n=i.replace(t,e),o.attr("title",n),o.text(n))})}),e(".edit-menu-item-title").trigger("change"),wpNavMenu.refreshAdvancedAccessibility(),wpNavMenu.menusChanged=!1,e(".wpglobus-menu-item").on("change",function(){var t,a,n=e(this),o=n.data("item-id");n.hasClass("wpglobus-item-title")&&(t=WPGlobusCore.getString(e("input#edit-menu-item-title-"+o).val(),n.val(),n.data("language")),a=e(document).triggerHandler("wpglobus_get_menu_translations",{string:t,lang:WPGlobusCoreData.open_languages,id:o,type:"input.edit-menu-item-title"}),"undefined"!=typeof a&&(t=a),e("input#edit-menu-item-title-"+o).val(t)),n.hasClass("wpglobus-item-attr")&&(t=WPGlobusCore.getString(e("input#edit-menu-item-attr-title-"+o).val(),n.val(),n.data("language")),a=e(document).triggerHandler("wpglobus_get_menu_translations",{string:t,lang:WPGlobusCoreData.open_languages,id:o,type:"input.edit-menu-item-attr-title"}),"undefined"!=typeof a&&(t=a),e("input#edit-menu-item-attr-title-"+o).val(t))})},post_edit:function(){e(document).on("heartbeat-send",function(t,a){"undefined"!=typeof a.wp_autosave&&(a.wpglobus_heartbeat="wpglobus",e.each(WPGlobusAdmin.data.open_languages,function(t,n){var o=e("#title_"+n).val()||"";o=e.trim(o),""!=o&&(a.wp_autosave["post_title_"+n]=o),o=e("#content_"+n).val()||"",o=e.trim(o),""!=o&&(a.wp_autosave["content_"+n]=o)}))});var t="#postdivrich",a=!0,n="#post-body-content";if(WPGlobusAdmin.data.support.editor===!1&&(t="#titlediv",a=!1),WPGlobusAdmin.data.support.title===!1&&(a=!1),e(n).prepend(e(".wpglobus-post-body-tabs-list")),e.each(WPGlobusAdmin.tabs,function(n,o){"default"===o?(e(t).wrap('<div id="tab-default"></div>'),a&&e(e("#titlediv")).insertBefore(t)):(e(t+"-"+o).wrap('<div id="tab-'+o+'"></div>'),a&&e(e("#titlediv-"+o)).insertBefore(t+"-"+o))}),e(n).addClass("wpglobus-post-body-tabs").tabs({beforeActivate:function(t,a){var n=a.oldTab[0].id.replace("link-tab-",""),o=a.newTab[0].id.replace("link-tab-","");"default"==n&&(n=WPGlobusCoreData.default_language),"default"==o&&(o=WPGlobusCoreData.default_language);var i=e(document).triggerHandler("wpglobus_post_body_tabs",[n,o]);return i||"undefined"==typeof i?!0:!1}}),e("#title").val(WPGlobusAdmin.title),e("#content").text(WPGlobusAdmin.content),e("#excerpt").addClass("hidden").css({display:"none"}),"undefined"!=typeof WPGlobusVendor&&WPGlobusVendor.vendor.WPSEO&&("undefined"!=typeof wpglobus_wpseo?wpglobus_wpseo():"undefined"!=typeof WPGlobusYoastSeo&&WPGlobusYoastSeo.init()),WPGlobusAdmin.data.modify_excerpt&&(e(WPGlobusAdmin.data.template).insertAfter("#excerpt"),e("body").on("change",".wpglobus-excerpt",function(){var t=e(this);e("#excerpt").val(WPGlobusCore.getString(e("#excerpt").val(),t.val(),t.data("language")))})),"undefined"!=typeof wp.utils&&"undefined"!=typeof wp.utils.WordCounter){WPGlobusCoreData.wordCounter={};var o=this;e.each(WPGlobusCoreData.enabled_languages,function(t,e){return e==WPGlobusCoreData.default_language?!0:void function(t,e,a){WPGlobusCoreData.wordCounter[a]={},WPGlobusCoreData.wordCounter[a].counter=e,t(function(){function e(t){var e,a;"object"==typeof t&&(t="tinymce"==t?o.getCurrentTab():t.target.id.replace("content_","")),"undefined"!=typeof WPGlobusCoreData.wordCounter[t]&&(e=!WPGlobusCoreData.wordCounter[t].contentEditor||WPGlobusCoreData.wordCounter[t].contentEditor.isHidden()?WPGlobusCoreData.wordCounter[t].content.val():WPGlobusCoreData.wordCounter[t].contentEditor.getContent({format:"raw"}),a=WPGlobusCoreData.wordCounter[t].counter.count(e),a!==WPGlobusCoreData.wordCounter[t].prevCount&&WPGlobusCoreData.wordCounter[t].count.text(a),WPGlobusCoreData.wordCounter[t].prevCount=a)}WPGlobusCoreData.wordCounter[a].content=t("#content_"+a),WPGlobusCoreData.wordCounter[a].count=t("#wp-word-count-"+a).find(".word-count-"+a),WPGlobusCoreData.wordCounter[a].prevCount=0,t(document).on("tinymce-editor-init",function(t,a){if(-1!=a.id.indexOf("content_")){var n=a.id.replace("content_","");WPGlobusCoreData.wordCounter[n].contentEditor=a,a.on("nodechange keyup",_.debounce(e,1e3))}}),WPGlobusCoreData.wordCounter[a].content.on("input keyup",_.debounce(e,1e3)),e(a)})}(jQuery,new wp.utils.WordCounter,e)})}if("undefined"!=typeof wpWordCount){var i=0,l=WPGlobusCoreData.open_languages,s=this.$document,d={};l.shift(),e.each(WPGlobusCoreData.open_languages,function(t,e){d[e]=0});var u={settings:{strip:/<[a-zA-Z\/][^<>]*>/g,clean:/[0-9.(),;:!?%#$¿'"_+=\\/-]+/g,w:/\S\s+/g,c:/\S/g},block:d,wc:function(t,a,n){var o,i=this,l=0;o=e(a==WPGlobusCoreData.default_language?".word-count":".word-count-"+a),void 0===n&&(n=wordCountL10n.type),"w"!==n&&"c"!==n&&(n="w"),i.block[a]||(i.block[a]=1,setTimeout(function(){t&&(t=t.replace(i.settings.strip," ").replace(/&nbsp;|&#160;/gi," "),t=t.replace(i.settings.clean,""),t.replace(i.settings[n],function(){l++})),o.html(l.toString()),setTimeout(function(){i.block[a]=0},2e3)},1))}};s.bind("wpglobuscountwords",function(t,e,a){u.wc(e,a)}),e.each(l,function(t,a){var n=e("#content_"+a);s.triggerHandler("wpglobuscountwords",[n.val(),a]),n.keyup(function(t){var e=t.keyCode||t.charCode;return e==i?!0:((13==e||8==i||46==i)&&s.triggerHandler("wpglobuscountwords",[n.val(),a]),i=e,!0)})}),e(document).triggerHandler("wpglobuscountwords",[e("#content").val(),WPGlobusCoreData.default_language])}e("body").on("click","#publish, #save-post",function(){if(WPGlobusAdmin.data.open_languages.length>1){e(document).triggerHandler("wpglobus_before_save_post",{content_tabs_id:n});var t,a=e("#title").val(),o="",i="";0==a.length&&(t=WPGlobusAdmin.data.open_languages.indexOf(WPGlobusAdmin.data.default_language),WPGlobusAdmin.data.open_languages.splice(t,1),e(WPGlobusAdmin.data.open_languages).each(function(t,n){i=0==t?"":"-",a=e("#title_"+n).val(),a.length>0&&(0==o.length&&(i=""),o=o+i+a)})),o.length>0&&e("#title").val(o)}"undefined"==typeof WPGlobusAdmin.data.tagsdiv||WPGlobusAdmin.data.tagsdiv.length<1||e(WPGlobusAdmin.data.tagsdiv).each(function(t,a){if(0==e("#"+a).size())return!0;var n=a.replace("tagsdiv-","");if("undefined"===n)return!0;if(0==e("#tax-input-"+n).size())return!0;var o,i=[];e("#tagsdiv-"+n+" .tagchecklist span").each(function(t,a){o=e(a).text(),o=o.replace("X","").trim(" "),"undefined"==typeof WPGlobusAdmin.data.tag[n][o]?i[t]=o:i[t]=WPGlobusAdmin.data.tag[n][o]}),e("#tax-input-"+n).val(i.join(", "))})}),e(".ui-state-default").on("click",function(){"link-tab-default"===e(this).attr("id")&&(e(window).scrollTop(e(window).scrollTop()+1),e(window).scrollTop(e(window).scrollTop()-1))})},start:function(){var t=this;e("#wpglobus_flags").select2({formatResult:this.format,formatSelection:this.format,minimumResultsForSearch:-1,escapeMarkup:function(t){return t}}),e("body").on("click","#enabled_languages-list li:first input",function(a){return a.preventDefault(),e(".redux-save-warn").css({display:"none"}),e("#enabled_languages-list").find("li:first > input").val("1"),0===e("#disable_first_language").length&&e(t.config.disable_first_language).insertAfter("#info_bar"),!1})},format:function(t){return'<img class="wpglobus_flag" src="'+WPGlobusAdmin.flag_url+t.text+'"/>&nbsp;&nbsp;'+t.text},set_dialog:function(){var t,a=!1,n=function(t){var n,o,i,l,s="wpglobus_dialog_start wpglobus_dialog_icon";l=['<div class="wpglobus_dialog_options_wrapper hidden">','<input style="width:initial;" id="wpglobus-cb-{{id}}" data-object="#wpglobus-dialog-start-{{id}}" data-meta-key="{{meta-key}}" class="wpglobus_dialog_option wpglobus_dialog_cb" type="checkbox" {{checked}} />',"</div>"].join(""),o="undefined"==typeof t?"#the-list tr":"#the-list tr#"+t,e(o).each(function(){var t,a,o,d=e(this),u=d.attr("id"),r=d.find("textarea"),c=s;return n=r.attr("id"),void 0===n?!0:(o=e("#"+u+"-key").val(),t=e("#"+n).clone(),e(r).addClass("wpglobus-dialog-field-source hidden"),a=r.attr("name"),e(t).attr("id","wpglobus-"+n),e(t).attr("name","wpglobus-"+a),e(t).attr("data-source-id",n),e(t).attr("class","wpglobus-dialog-field"),e(t).val(WPGlobusCore.TextFilter(e(r).val(),WPGlobusCoreData.language)),e(t).insertAfter(r),i=l.replace(/{{id}}/g,n),i=i.replace(/{{meta-key}}/g,o),void 0===WPGlobusAdmin.data.post_meta_settings[WPGlobusAdmin.data.post_type]?i=i.replace(/{{checked}}/,"checked"):void 0!==WPGlobusAdmin.data.post_meta_settings[WPGlobusAdmin.data.post_type][o]&&"false"==WPGlobusAdmin.data.post_meta_settings[WPGlobusAdmin.data.post_type][o]?(i=i.replace(/{{checked}}/,""),c=s+" wpglobus_dialog_start_hidden"):(i=i.replace(/{{checked}}/,"checked"),c=s),void d.append('<td style="width:20px;"><div id="wpglobus-dialog-start-'+n+'" data-type="control" data-source-type="textarea" data-source-id="'+n+'" class="'+c+'"></div>'+i+"</td>"))}),!a&&e("#list-table .wpglobus_dialog_start").size()>0&&(e("#list-table thead tr").append('<th class="wpglobus-control-head"><div class="wpglobus_dialog_settings wpglobus_dialog_icon"></div></th>'),a=!0)};n(),e("body").on("change",".wpglobus-dialog-field",function(){var t,a=e(this),n="#"+a.data("source-id"),o="",i="";"undefined"!=typeof n&&(o=e(n).val(),/(\{:|\[:|<!--:)[a-z]{2}/.test(o)?(e.each(WPGlobusCoreData.enabled_languages,function(e,n){t=n==WPGlobusCoreData.language?a.val():WPGlobusCore.TextFilter(o,n,"RETURN_EMPTY"),""!=t&&(i+=WPGlobusCore.addLocaleMarks(t,n))}),e(n).val(i)):e(n).val(a.val()))}),e(document).ajaxSend(function(e,a,n){"add-meta"==n.action&&(t=n.element)}),e(document).ajaxComplete(function(a,o,i){"add-meta"==i.action&&void 0!==o.responseXML&&n("newmeta"==t?"meta-"+e(o.responseXML.documentElement.outerHTML).find("meta").attr("id"):t)}),WPGlobusDialogApp.init({dialogTitle:"Edit meta"})}},new t.App,t}(window.WPGlobusAdminApp||{},jQuery)});