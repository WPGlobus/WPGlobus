"use strict";jQuery(document).ready(function(D){var A={counter:0,noticeOn:!1,initDone:!1,languageSelectorBoxDelta:0,oldLanguageSelector:!1,languageSelectorEnabled:!0,parseBool:function(e){return!/^(false|0)$/i.test(e)&&!!e},getCounter:function(){return A.counter},getOptionKey:function(e){return e=e||"",WPGlobusGutenberg.keyOption[e]},getOptions:function(){return WPGlobusGutenberg.options},isOldLanguageSelector:function(){return A.oldLanguageSelector},isPostDisabled:function(){return WPGlobusGutenberg.__post.disabled},isEnabledTab:function(e){void 0===e&&(e="options");var t=!1;return"options"==e&&A.parseBool(WPGlobusGutenberg.enabledOptionsTab)&&(t=!0),t},init:function(){WPGlobusGutenberg.yoastSeo=A.parseBool(WPGlobusGutenberg.yoastSeo),WPGlobusGutenberg.elementor=A.parseBool(WPGlobusGutenberg.elementor),A.isPostDisabled()||(A.initListeners(),A.initNotifications(),A.setTabs(),A.formHandler(),A.attachListeners())},initListeners:function(){WPGlobusGutenberg.yoastSeo&&1==D(".yoast.wpseo-metabox").length&&D(window).on("beforeunload",function(e){e.stopImmediatePropagation()})},formHandler:function(){var e=D(".metabox-base-form #referredby").attr("value");void 0!==e&&(e=-1==e.indexOf("language=en")?e+"&language="+WPGlobusGutenberg.language:e.replace("language=en","language="+WPGlobusGutenberg.language),D(".metabox-base-form #referredby").attr("value",e)),void 0!==(e=D('input[name="_wp_original_http_referer"]').attr("value"))&&(e=-1==e.indexOf("language=en")?e+"&language="+WPGlobusGutenberg.language:e.replace("language=en","language="+WPGlobusGutenberg.language),D('input[name="_wp_original_http_referer"]').attr("value",e))},initNotifications:function(){void 0!==wp.editPost&&void 0!==wp.plugins&&WPGlobusGutenberg.elementor&&"internal"==WPGlobusGutenberg.data.elementorCssPrintMethod&&wp.data.dispatch("core/notices").createNotice("error",WPGlobusGutenberg.i18n.elementorWarning,{id:"elementorcssprintmethodnotice",isDismissible:!0,actions:[{url:WPGlobusGutenberg.i18n.elementorActionLink,label:WPGlobusGutenberg.i18n.elementorActionLabel}]})},setTabs:function(){if(0!=WPGlobusGutenberg.tabs.length){A.oldLanguageSelector=!0;var t=setInterval(function(){var e=D(".edit-post-header__settings");1==e.length&&(e.before(WPGlobusGutenberg.tabs),clearInterval(t))},200)}else A.WPGlobusSwitcherPlugin()},setSelectorStatus:function(){if(A.isOldLanguageSelector()){D(".wpglobus-gutenberg-selector-box").css({opacity:"0.2"}).attr("onclick","return false;"),A.languageSelectorEnabled=!1;var e=setInterval(function(){if(0==D(".is-saving").length){if(clearInterval(e),WPGlobusGutenberg.pagenow==WPGlobusGutenberg.postNewPage&&-1!=location.pathname.indexOf(WPGlobusGutenberg.postEditPage))return WPGlobusGutenberg.pagenow=WPGlobusGutenberg.postEditPage,D(".wpglobus-gutenberg-selector-box").css({opacity:"1"}).attr("onclick",""),void A.reloadPage();A.languageSelectorEnabled=!0,D(".wpglobus-gutenberg-selector-box").css({opacity:"1"}).attr("onclick","")}},400)}},reloadPage:function(){D(".wpglobus-selector-grid").css({"grid-template-columns":"10% 90%"}),D(".wpglobus-gutenberg-selector-text").text(WPGlobusGutenberg.i18n.reload),function e(){D(".wpglobus-gutenberg-selector").fadeOut(500).fadeIn(500,e)}(),setTimeout(function(){location.reload()},500)},attachListeners:function(){A.isOldLanguageSelector()&&(D(document).on("mouseenter",".wpglobus-gutenberg-selector",function(e){A.languageSelectorEnabled&&(D(".wpglobus-gutenberg-selector-dropdown").css({display:"block"}),A.languageSelectorBoxDelta=e.screenY,D(".edit-post-header").css({"z-index":"100000"}),D(".wpglobus-gutenberg-selector-box").css({"z-index":"100001"}))}),D(document).on("mouseleave",".wpglobus-gutenberg-selector",function(e){0!=A.languageSelectorBoxDelta&&e.screenY-A.languageSelectorBoxDelta<=0&&(D(".wpglobus-gutenberg-selector-dropdown").css({display:"none"}),D(".edit-post-header").css({"z-index":"9989"}),D(".wpglobus-gutenberg-selector-box").css({"z-index":"100"}))}),D(document).on("mouseleave",".wpglobus-gutenberg-selector-dropdown",function(e){D(".wpglobus-gutenberg-selector-dropdown").css({display:"none"}),D(".edit-post-header").css({"z-index":"9989"}),D(".wpglobus-gutenberg-selector-box").css({"z-index":"10000"})}),D(document).on("click",".editor-post-save-draft",function(){A.setSelectorStatus()}),D(document).on("click",".editor-post-publish-button",function(){A.setSelectorStatus()}))},WPGlobusSwitcherPlugin:function(){if(void 0!==wp.editPost&&void 0!==wp.plugins){var e=WPGlobusGutenberg.language,t=WPGlobusCoreData.enabled_languages,n=WPGlobusCoreData.en_language_name,o=WPGlobusGutenberg.flags_url,s="WPGlobus Switcher",a=location.href,l={};for(var u in t)-1==a.indexOf("language="+e)?l[t[u]]=a+"&language="+t[u]:l[t[u]]=a.replace("language="+e,"language="+t[u]);var i=wp.i18n.__,r=wp.element.createElement,g=wp.element.Fragment,c=wp.components.TabPanel,b=wp.compose.withState,p=wp.components.RadioControl,d=wp.components.Notice,w=wp.components.Button,m=wp.editPost.PluginSidebarMoreMenuItem,G=wp.components.PanelBody,f=wp.editPost.PluginSidebar,h=wp.plugins.registerPlugin,P=D(".components-panel__header.edit-post-sidebar-header button.components-icon-button").eq(0),v={flagOnly:'<img height="20px" width="20px" src="'+WPGlobusGutenberg.flags_url[WPGlobusGutenberg.language]+'" />',flagLanguage:'<img height="20px" width="20px" src="'+WPGlobusGutenberg.flags_url[WPGlobusGutenberg.language]+'" />&nbsp;'+WPGlobusAdmin.data.en_language_name[WPGlobusGutenberg.language],flagCode:'<img height="20px" width="20px" src="'+WPGlobusGutenberg.flags_url[WPGlobusGutenberg.language]+'" />&nbsp;'+WPGlobusGutenberg.language,languageOnly:"&nbsp;"+WPGlobusAdmin.data.en_language_name[WPGlobusGutenberg.language],languageCode:"&nbsp;"+WPGlobusGutenberg.language},W="",_="",x=A.getOptionKey("switcherButtonType");S(WPGlobusGutenberg.options[x]),_=L(),D(document).on("click",P,function(){E()});var y=b({value:_})(function(e){e.value;var t=e.setState;return r(p,{label:"",help:"Select type of switcher language button.",selected:_,className:"wpglobus-switcher-components-radio-control",options:[{label:"Flag only",value:"flagOnly"},{label:"Flag with language",value:"flagLanguage"},{label:"Flag with language code",value:"flagCode"},{label:"Language only",value:"languageOnly"},{label:"Language code",value:"languageCode"}],onChange:function(e){t({value:_=e}),T(x,e)}})});h("wpglobus-switcher",{icon:"",render:function(){return E(),r(g,{},r(m,{target:"wpglobus-switcher-sidebar",icon:"admin-site"},i("WPGlobus")),r(f,{name:"wpglobus-switcher-sidebar",title:N(),className:"wpglobus-switcher-components-panel"},r("div",{className:"wpglobus-switcher-message wpglobus-switcher-error-message hidden",style:{}},""),r(G,{className:"wpglobus-switcher-panel__body"},(e=[{name:"switcher",title:"Languages",className:"wpglobus-panel-tab wpglobus-panel-tab-selector edit-post-sidebar__panel-tab"}],WPGlobusGutenberg.isEnabledTab("options")&&e.push({name:"options",title:"Options",className:"wpglobus-panel-tab wpglobus-panel-tab-options edit-post-sidebar__panel-tab"}),r(c,{name:"WPGlobusSwitcherTabPanel",className:"wpglobus-tab-panel",activeClass:"is-active",tabs:e},C)))));var e}})}function S(e){W=e=e||"flagLanguage"}function L(){return W}function N(){return s}function O(e){void 0===e&&(e=!0);var t=document.querySelectorAll(".wpglobus-switcher-components-radio-control .components-radio-control__input");if(0!=t.length)if(e){t.forEach(function(e){e.classList.add(e.value),e.classList.remove("wpglobus-switcher-pulsate-radio"),e.classList.add("wpglobus-switcher-pulsate-radio-off")});var n=document.querySelector(".wpglobus-switcher-components-radio-control ."+_);n.classList.remove("wpglobus-switcher-pulsate-radio-off"),n.classList.add("wpglobus-switcher-pulsate-radio")}else t.forEach(function(e){e.classList.remove("wpglobus-switcher-pulsate-radio"),e.classList.remove("wpglobus-switcher-pulsate-radio-off"),e.classList.add("wpglobus-switcher-pulsate-radio-on")})}function k(e,t){void 0===e||A.noticeOn||(A.noticeOn=!0,e.innerText=t,e.classList.remove("hidden"),setTimeout(function(){e.classList.add("hidden"),A.noticeOn=!1},3e3))}function T(e,t){t=t||"",x==(e=e||"")&&(O(!0),function(e,t){if(""==(e=e||""))return;var n={sender:"WPGlobusGutenberg",_action:"saveOption",is_admin:1};return n.counter=A.counter++,n.options={},n.options[e]=t,wp.ajax.post(WPGlobusGutenberg.wpglobusAjax,{data:n})}(e,t).then(function(e){"success"==e.result&&(S(t),E(WPGlobusGutenberg.options[x]=t))}).fail(function(e){var t=document.getElementsByClassName("wpglobus-switcher-error-message");void 0!==t[0]&&("error"==e.result?k(t[0],e.message):400==e.status&&k(t[0],"Error: "+e.status+" ("+e.statusText+")"),_=L());var n=document.getElementsByClassName("wpglobus-panel-tab-options");void 0!==n[0]&&-1!=n[0].classList.value.indexOf("is-active")&&n[0].click()}).always(function(){O(!1)}))}function B(e){return void 0===v[e]&&(e=W),v[e]}function E(n){void 0!==n&&void 0!==v[n]||(n=W),setTimeout(function(){var e=document.querySelector('[aria-label="'+N()+'"]');if(null!=e)if(void 0===e.dataset.status){var t=e.innerHTML;e.innerHTML=t+B(n),e.dataset.status="init"}else e.innerHTML=B(n),e.dataset.status="changed"},300)}function C(e){return"switcher"==e.name?r("div",{className:"wpglobus-tab-content wpglobus-selector-tab-content"},r(d,{className:"wpglobus-switcher-panel__notice",status:"informational",isDismissible:!1},i("Select language")),r("div",{className:"wpglobus-switcher-panel__switcher-box"},WPGlobusGutenberg.pagenow==WPGlobusGutenberg.postNewPage?r("div",{style:{marginBottom:"20px"},className:"wpglobus-switcher-panel__switcher-notice"},WPGlobusGutenberg.i18n.save_post):r("ul",{className:"language-list"},t.map(function(e){return r("li",{key:e,className:"language-item"},r("img",{style:{marginRight:"7px"},className:"wpglobus-switcher-panel__flag",height:"20px",width:"20px",src:o[e]}),r(w,{href:l[e],isSmall:!0,isPrimary:!0},n[e]))}))),r(w,{className:"wpglobus-switcher-panel__button-link wpglobus-switcher-panel__info",href:WPGlobusGutenberg.store_link,isLink:!0,target:"_blank"},i("WPGlobus Premium Add-ons")),r(w,{className:"wpglobus-switcher-panel__button-link wpglobus-switcher-panel__settings-link",href:WPGlobusGutenberg.block_editor_tab_url,isLink:!0},i("Settings"))):"options"==e.name?r("div",{className:"wpglobus-tab-content wpglobus-options-tab-content"},r(d,{className:"wpglobus-switcher-panel__notice",status:"informational",isDismissible:!1},i("Select type")),r(y,null)):void 0}}};WPGlobusGutenberg=D.extend({},WPGlobusGutenberg,A),WPGlobusGutenberg.init()});